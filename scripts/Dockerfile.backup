FROM postgres:16-alpine

RUN apk add --no-cache curl

COPY backup.sh /usr/local/bin/backup.sh
RUN chmod +x /usr/local/bin/backup.sh

CMD ["sh", "-c", "echo '0 2 * * * /usr/local/bin/backup.sh >> /var/log/backup.log 2>&1' > /etc/crontabs/root && echo 'Backup cron scheduled at 02:00 daily' && /usr/local/bin/backup.sh && crond -f -l 2"]
